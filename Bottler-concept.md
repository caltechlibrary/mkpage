Bottler
=======

> `bottler` is portable application generator relying on simple markup.

Core Concepts
-------------

- `bottler` generates an "Bottle" python app for curating Objects
- The UI need is listing objects or editing edits
- Once you describe the schema for your objects and describe the data entry form for curating a single object `bottler` can be used to generate a "Bottle" python application that uses [Web Components](https://developer.mozilla.org/en-US/docs/Web/Web_Components) for extended UI functionality in data entry forms.


`bottler` is driven by declaring data structures, web form using a standard
markup.  schema can be described in JSON or XML based on a prefined set of data type common in Library and Archive metadata. A default set of actions is available in `bottler` generate apps, these are based on standard database actions of list, create, read, update and delete.

The directory layout and file layout of a `bottler` application is.

- schema (a JSON object describing the data structure the application curates)
- webforms (This is where we use HTML markup to describe the Web Components based UI for curating objects described previously by our schema)
- templates (Pandoc templates for rendering static content)
- components (Any custom web components needed by the application Web UI)
- htdocs (Markdown, static content, html, css, and JavaScript used by the application)
- bottler.ini is a configuration file describing how to build the application
    - E.g. mapping schema to webforms
    - Name of the direct to hold our application Python "Bottle" code
    - htdocs directory and action to build the static content used in the application
- settings.ini is used to run the bottle app generated

Developer workflow
------------------

Creating a new web UI

1. `bottler init` would create a default directory structure, files and codemeta.json file.
2. complete our object schema
3. complete our web form markup
4. `bottler build` would build the application, e.g. generate fresh Python code for object modules and routes
5. `run-server` to test the resulting "Bottle" Python application


Updating an `bottler` app.

1. Update our `bottler` metadata files
    - Add/update/remove any schema needed by the app
    - Add/update/remove any webforms in the app
    - Add/update/remove any custom Web Components used in the app
    - Add/Update/remove any custom Python code (e.g. class extensions)
    - Update `bottler.ini` if needed
2. Run `bottler build` to rebuild the site
3. Run `run-server` to test the updated "Bottle" Python application

Static content
--------------

Static content should be placed in the htdocs directory. The directy structure will be used assign the appropirate routesin the "Bottle" application generated by `bottler`.

Pandoc is used to render Markdown content and can also be used to generating things like menus and other navigation elements used in the applicatin.

The htdocs directory should also contain any custom Javascript, media assets, CSS or  other materials needed to render the website outside of the generated Python code, templates and webforms.



Reference Material
------------------

- [Open Search](https://www.opensearch.org/)
- [Web Components](https://developer.mozilla.org/en-US/docs/Web/Web_Components)
    - [Examples](https://github.com/mdn/web-components-examples)
    - ECMAScript 2015 [Classes](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes)
    - [slots](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot)
    - [template](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template)
        - [The truth about templates](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_templates_and_slots#the_truth_about_templates)
    - [content](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/content)
- [Web forms](https://developer.mozilla.org/en-US/docs/Learn/Forms)
    - [HTML5 input types](https://developer.mozilla.org/en-US/docs/Learn/Forms/HTML5_input_types)
    - [Basic Native Controls](https://developer.mozilla.org/en-US/docs/Learn/Forms/Basic_native_form_controls)
    - [How to structure your web form](https://developer.mozilla.org/en-US/docs/Learn/Forms/How_to_structure_a_web_form)
- [HTML form element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form)
- [HTML forms guide](https://developer.mozilla.org/en-US/docs/Learn/Forms)
- Other elements that are used when creating forms: [<button>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button), [<datalist>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist), [<fieldset>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/fieldset), [<input>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input), [<label>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label), [<legend>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/legend), [<meter>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meter), [<optgroup>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/optgroup), [<option>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/option), [<output>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/output), [<progress>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/progress), [<select>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select), [<textarea>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea).
- Getting a list of the elements in the form: [HTMLFormElement.elements](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/elements)
    - [ARIA: Form role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Form_Role)
    - [ARIA: Search role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Search_role)
