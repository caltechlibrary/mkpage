<!DOCTYPE html>
<html>
<head>
    <title>mkpage: An experimental template and markdown processor</title>
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic' rel='stylesheet' type='text/css'>
    <link href="css/site.css" rel="stylesheet" />
<head>
<body>
    <header>
        <h1>mkpage: An experimental template and markdown processor</h1>
    </header>
    <section><p>This is experimental&hellip;, things are sure to change</p>

<h1>mkpage</h1>

<p>An experimental template engine with an embedded markdown processor.  <em>mkpage</em> (pronounced &ldquo;make page&rdquo;) is
a simple command line tool which accepts key value pairs and applies them to a Golang <a href="https://golang.org/pkg/text/template/">text/template</a>.
The key side of a pair corresponds to the template keys in the template document (e.g.
{{.pageContent}} is represented by the key <em>pageContent</em>). The value side of the pair can be a string,
filename or URL for a data source. Here&rsquo;s a simple example of a form letter</p>

<pre><code class="language-template">    Date: {{.now}}

    Hello {{.name -}},
    
    Forecast:

    {{range .weather.data.text}}
       + {{ . }}
    {{end}}

    Thank you

    {{.signature}}
</code></pre>

<p>Render the template above (i.e. myformletter.template) would be accomplished from the following
data sources&ndash;</p>

<ul>
<li>&ldquo;now&rdquo; and &ldquo;name&rdquo; are strings</li>
<li>&ldquo;weather&rdquo; comes from a URL of JSON content</li>
<li>&ldquo;signature&rdquo; comes from a file in our local disc</li>
</ul>

<p>That would be expressed on the command line as follows</p>

<pre><code class="language-shell">    mkpage &quot;now=text:$(date)&quot; \
        &quot;name=text:Little Frieda&quot; \
        &quot;weather=http://forecast.weather.gov/MapClick.php?lat=13.47190933300044&amp;lon=144.74977715100056&amp;FcstType=json&quot; \
        signature=testdata/signature.txt \
        testdata/myformletter.template
</code></pre>

<p>Since we are leveraging Go&rsquo;s <a href="https://golang.org/pkg/text/template/">text/template</a> the template itself
can be more than a simple substitution.</p>

<h2>Template blocks</h2>

<p>The Go text templates support defining blocks and rendering them in conjuction with a main template. This is
also supported by <em>mkpage</em>. For each template encountered on the command line it is added to an array of templates
passed and parse by the text template package.  This is then executed and output rendered by <em>mkpage</em>.</p>

<pre><code class="language-shell">    mkpage &quot;content=text:Hello World&quot; testdata/page.tmpl testdata/header.tmpl testdata/footer.tmpl
</code></pre>

<p>Here is what <em>page.tmpl</em> would look like</p>

<pre><code class="language-go">    {{template &quot;header&quot; . }}

        {{.content}}

    {{template &quot;footer&quot; . }}
</code></pre>

<p>The header and footer are then defined in their own template files (though they also could be combined into one).</p>

<p><em>header.tmpl</em></p>

<pre><code class="language-go">    {{define &quot;header&quot;}}This is the document header{{end}}
</code></pre>

<p><em>footer.tmpl</em></p>

<pre><code class="language-go">    {{define &quot;footer&quot;}}This is the footer{{end}}
</code></pre>

<p>In this example the output would look like</p>

<pre><code class="language-text">    This is the document header

        Hello World

    This is the footer
</code></pre>

<h2>Content formats and data sources</h2>

<p><em>mkpage</em> support three content formats</p>

<ul>
<li>text/plain (e.g. &ldquo;text:&rdquo; when specifying strings, any file extension except &ldquo;.md&rdquo;, and &ldquo;.json&rdquo;)</li>
<li>text/markdown (e.g. &ldquo;markdown:&rdquo; when specifying strings, file extension &ldquo;.md&rdquo;)</li>
<li>application/json (e.g. &ldquo;json:&rdquo; when specifying strings, file extension &ldquo;.json&rdquo;)</li>
</ul>

<p>It also supports three content sources</p>

<ul>
<li>an explicit string (prefixed with a hint, e.g. &ldquo;text:&ldquo;, &ldquo;markdown:&ldquo;, &ldquo;json:&ldquo;)</li>
<li>a filepath</li>
<li>a URL</li>
</ul>

<h2>Templates</h2>

<p><em>mkpage</em> template engine is the Go <a href="https://golang.org/pkg/text/template/">text/template</a> package.
Other template systems could be implemented but I&rsquo;m keeping the experiment simple at this point.</p>

<h2>A note about Markdown dialect</h2>

<p>In additional to populating a template with values from data sources <em>mkpage</em> also includes the
<a href="https://github.com/russross/blackfriday">blackfriday</a> markdown processor.  The <code>blackfriday.MarkdownCommon()</code>
function is envoked whenever markdown content is suggested. That means for strings that have the
&ldquo;markdown:&rdquo; hint prefix, files ending in &ldquo;.md&rdquo; file extension or URL content with the content type
returned as &ldquo;text/markdown&rdquo;.</p>

<h2>Options</h2>

<ul>
<li>-h, -help - get command line help</li>
<li>-v, -version - show <em>mkpage</em> version number</li>
<li>-l, -license - show <em>mkpage</em> license information</li>
</ul>
</section>
    <nav><ul>
<li><a href="/">home</a></li>
<li><a href="./">mkpage</a></li>
<li><a href="go-template-recipes.html">Go template recipes</a></li>
<li><a href="LICENSE">LICENSE</a></li>
<li><a href="install.html">Install</a></li>
<li><a href="https://github.com/rsdoiel/mkpage">Github</a></li>
</ul>
</nav>
    <footer>
    <p>copyright &copy; 2016 R. S. Doiel
See: <a href="LICENSE">LICENSE</a></p>

    </footer>
</body>
</html>
